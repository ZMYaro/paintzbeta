<html>
	<head>
		<script src="scripts/lib/promise.auto.min.js"></script>
		<script>
			window.addEventListener('load', function () {
				function loadStuff(output) {
				  return new Promise(function resolveImmediately(resolve, reject) {
					setTimeout(function() { resolve(output); }, Math.random() * 2000 + 1000);
				  });
				}

				var promiseA = loadStuff('Promise A resolved.').then(function (val) { console.log(val); });
				var promiseB = loadStuff('Promise B resolved.').then(function (val) { console.log(val); });
				var promiseC = loadStuff('Promise C resolved.').then(function (val) { console.log(val); });
				var promiseD = loadStuff('Promise D resolved.').then(function (val) { console.log(val); });

				Promise.all([promiseA, promiseB, promiseC, promiseD])
				  .then(function() { console.log('All promises resolved!'); });
			}, false);
		</script>
	</head>
	<body>
		Test 2
	</body>
</html>
